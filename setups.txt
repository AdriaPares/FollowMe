#Add all setups we do here to replicate later with terraform

#Python libraries

sudo apt install python3-pip -y

pip3 install python-kafka

# Do this if pip3 doesn't work for kafka
python3 -m pip install kafka-python

# This takes a while to set up, it's normal
pip3 install cassandra-driver --user

# BEWARE boto3 requires that the AWS KEYS be present in the environment. Add this to .profile and source it

export AWS_ACCESS_KEY_ID=XXXXXXX
export AWS_SECRET_ACCESS_KEY=XXXXXXXXX
export AWS_DEFAULT_REGION=your-region-like-this # us-east-1, for example

pip3 install boto3
pip3 install pyspark

# Spark

# All nodes need the same version of pyspark or things break.
# We also need to reroute $SPARK_HOME to the pyspark folder. Usually: [[NOT REALLY NEEDED AFAIK]]
# SPARK_HOME=/home/ubuntu/.local/lib/python3.5/site-packages/pyspark/